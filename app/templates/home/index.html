<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ATBI - Agri-Aqua Business Incubator</title>
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/agrilogo.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <img src="{{ url_for('static', filename='images/agrilogo.png') }}" alt="ATBI logo" class="logo-img">
      </div>
      <nav class="nav-menu">
        <ul class="nav-list">
          <li><a href="{{ url_for('home.index') }}" class="nav-link">HOME</a></li>
          <li><a href="{{ url_for('shop.shop_home') }}" class="nav-link">SHOP</a></li>
          <li><a href="{{ url_for('incubatee_showroom.incubatee_showroom') }}" class="nav-link">INCUBATES</a></li>
          <li><a href="#about" class="nav-link">ABOUT</a></li>
          <li><a href="{{ url_for('contact.contact_page') }}" class="nav-link">CONTACTS</a></li>
          <li><a href="#" id="openCartBtn" class="nav-link cart-btn">ðŸ›’<span id="cartCountBadge" class="cart-count-badge">0</span></a></li>
          <li><a href="{{ url_for('login.login') }}" class="nav-link login-btn">LOGIN</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HERO SECTION -->
  <section class="hero" id="home">
    <div class="hero-container">
      <h1 class="hero-title">Welcome to Agri-Aqua Mart</h1>
      <p class="hero-subtitle">Your Smart, Fresh, and Sustainable Goods</p>
    </div>
  </section>

  <!-- SHOP SECTION -->
  <section class="shop" id="shop">
    <div class="container">
      <h2 class="section-title">Featured Agri-Aqua Products</h2>
      <div class="products-grid">
        <!-- Product cards -->
        <div class="product-card">
          <div class="product-image">
            <img src="{{ url_for('static', filename='images/smart_irrigation.png') }}" alt="Smart Irrigation System">
          </div>
          <div class="product-info">
            <h3 class="product-title">Smart Irrigation System</h3>
            <p class="product-price">$299.99</p>
            <p class="product-expiry">Expiration: Dec 2026</p>
            <button class="add-to-cart"><i class="fas fa-cart-plus"></i> Add to Cart</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-image">
            <img src="{{ url_for('static', filename='images/aquaponics_kit.png') }}" alt="Aquaponics Kit">
          </div>
          <div class="product-info">
            <h3 class="product-title">Aquaponics Starter Kit</h3>
            <p class="product-price">$199.99</p>
            <p class="product-expiry">Expiration: Nov 2026</p>
            <button class="add-to-cart"><i class="fas fa-cart-plus"></i> Add to Cart</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-image">
            <img src="{{ url_for('static', filename='images/soil_IoT.png') }}" alt="Soil Sensor">
          </div>
          <div class="product-info">
            <h3 class="product-title">IoT Soil Sensor</h3>
            <p class="product-price">$89.99</p>
            <p class="product-expiry">Expiration: Oct 2026</p>
            <button class="add-to-cart"><i class="fas fa-cart-plus"></i> Add to Cart</button>
          </div>
        </div>

        <div class="product-card">
          <div class="product-image">
            <img src="{{ url_for('static', filename='images/smart_fish.png') }}" alt="Fish Feed Optimizer">
          </div>
          <div class="product-info">
            <h3 class="product-title">Smart Fish Feed Optimizer</h3>
            <p class="product-price">$159.99</p>
            <p class="product-expiry">Expiration: Jan 2027</p>
            <button class="add-to-cart"><i class="fas fa-cart-plus"></i> Add to Cart</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT SECTION -->
  <section id="about" class="about">
    <div class="container">
      <h2 class="section-title">About ATBI</h2>
      <div class="about-content">
        <p>
          The Agri-Aqua Technology Business Incubator (ATBI) is a platform dedicated to nurturing agribusiness and aquaculture startups.
          Our mission is to empower entrepreneurs by providing mentorship, technical support, and access to markets.
        </p>
        <p>
          ATBI aims to foster innovation and sustainability in agriculture and aquaculture, ensuring that local farmers and innovators
          can turn their ideas into viable businesses that promote food security and rural development.
        </p>
        <p>
          Partnering with universities and industry experts, ATBI continues to support incubation projects that create positive
          social and economic impact.
        </p>
      </div>
    </div>
  </section>

  <!-- ðŸ›’ CART MODAL -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-modal-content">
      <div id="cartContent"></div>
    </div>
  </div>
<script>
      async function updateCartCountFromBackend() {
    try {
        const res = await fetch('/cart/count');
        const contentType = res.headers.get('content-type') || '';
        if (!contentType.includes('application/json')) return;

        const data = await res.json();
        if (data.success) {
        const count = data.count || 0;
        const badge = document.getElementById('cartCountBadge');
        if (badge) {
            badge.textContent = count;
            badge.style.display = count > 0 ? 'inline-block' : 'none';
        }
        }
    } catch (err) {
        console.error('Error fetching cart count:', err);
    }
    }

    // Call it on page load
    updateCartCountFromBackend();

    // Optional: auto-update every 10-15 seconds
    setInterval(updateCartCountFromBackend, 15000);
</script>
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
</body>
</html>
